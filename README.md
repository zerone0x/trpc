# 贝克莱世界（Berkeley World）

## 执行摘要

“存在就是被感知。”——乔治·贝克莱

贝克莱世界是一款将 TRPG 的极致自由度、MMORPG 的社交属性、Roguelike 的随机探索与开放世界的宏大尺度融合在一起的文字游戏。在这里，玩家可以做任何事情，进入一个由 AI 与图数据库共同驱动、边探索边生成的无限世界。

## 项目愿景

1. 无限地图：世界在玩家探索时即时生成，理论上可达现实世界 1:1 的城市级规模。
2. 无限 NPC：每个 NPC 由 AI 依据独特人设生成，行为与记忆受图数据库约束，确保一致性。
3. 无限剧情：主线、支线乃至世界事件都可在玩家行动中即时生成。
4. 真·第二人生：在微颗粒度的世界里，玩家可在任意街角相遇与互动，而非传统“主城门口”。

## 核心特性

| 特性         | 说明                                                                       |
| ------------ | -------------------------------------------------------------------------- |
| AIGC 驱动    | 地图、NPC、剧情均按需生成，实时写入图数据库，保证不矛盾且可追溯。          |
| 图数据库记忆 | 所有实体及其关系以点/边形式存储，实现“牵一发而动全身”的世界逻辑。          |
| 模组化叙事   | 支持社区以“上帝模式”编写或注入剧情模组，形成多宇宙共存的大世界。           |
| 纯文字交互   | 使用自然语言描述世界与行为，降低美术与客户端成本，将资源集中于玩法与叙事。 |

## 系统架构概览

```
┌───────────┐      玩家指令      ┌────────────┐
│   客户端    │ ─────────────▶ │   后端 API  │
└───────────┘                    │            │
        ▲                         ▼            │
        │                    ┌────────────┐    │
        │  文字反馈           │  AI 服务    │◀──┤
        │                    └────────────┘    │
        │                         │            │
        │                         ▼            │
        │                    ┌────────────┐    │
        │                    │ 图数据库    │────┘
        │                    └────────────┘
```

## 数据模型

| 表 / 点      | 字段                                 | 含义                                       |
| ------------ | ------------------------------------ | ------------------------------------------ |
| block        | id, angle, dis, description, entryid | 地图分块；entryid 指向入口 object          |
| object       | id, description, entryid, entrytype  | 世界中一切实体（人物、物品、场景、抽象体） |
| relationship | obj1, obj2, rel                      | 实体之间的关系（拥有、位于、隶属等）       |
| rel\_        | obj, block                           | object 与所在 block 的映射                 |

## 交互流程（简化自示意图）

1. 玩家提出操作。
2. 判断操作类型。
3. 若为交互，扩展 object 关系：
   1. 判断 relationship 是否已存在。
      - 若存在：读取关联 object 并执行操作。
      - 若不存在：继续判断 object 是否已存在。
        - 若 object 存在：建立新 relationship。
        - 若 object 不存在：决定是否需要生成；如需，则生成 object 与 relationship。
4. 返回交互结果并反馈给玩家。
5. 若操作为移动：
   1. 判断目标 block 是否存在。
      - 若不存在：生成 block 及其初始 object。

## 技术选型

- 语言 / 框架：待定（推荐 Node.js / Python + FastAPI / Express）
- 图数据库：Neo4j / Memgraph / JanusGraph
- 向量检索 & AI 代理：OpenAI GPT-4o / Llama 系列 + self-host 向量库
- 部署：Docker + Kubernetes（支持水平扩展）

## 快速开始（原型）

```bash
# 克隆仓库
$ git clone <repo_url>
$ cd berkeley-world

# 安装依赖
$ pnpm i  # or npm install / pip install -r requirements.txt

# 启动开发环境
$ pnpm dev
```

> ⚠️ 目前处于概念验证阶段，核心逻辑参考 `docs/` 与 `src/` 目录中的示例代码。

## 加入我们

我们正在招募对 MMORPG、TRPG 与生成式 AI 充满热情的全栈工程师、算法工程师、游戏策划与世界观设计师。请联系微信 **15524840902（pw0）**，或在 Issue 中留言。

## 许可证

MIT License
